{"version":3,"sources":["pages/ArticleList/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","assets/imgs/page_bg1.png"],"names":["ArticleList","loadMore","document","documentElement","scrollTop","body","clientHeight","scrollHeight","getMoreArticleList","state","list","page","has_next","isDataArrive","page_num","this","getArticleList","window","addEventListener","removeEventListener","page_size","username","props","match","params","data","topicList","then","res","code","pageInfo","next_number","setState","topics","message","error","src","require","className","alt","style","marginBottom","map","item","index","key","length","Component","_arrayLikeToArray","arr","len","i","arr2","Array","_toConsumableArray","isArray","iter","Symbol","iterator","Object","from","o","minLen","n","prototype","toString","call","slice","constructor","name","test","TypeError","module","exports"],"mappings":"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","file":"static/js/11.aa13241d.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport Header from '../../components/Header'\nimport Topic from '../../components/TopicItem/topicItem'\nimport Aside from '../../components/Aside'\nimport { message } from 'antd'\nimport { topicList } from '../../servers/index'\nimport './index.css'\n\nexport default class ArticleList extends Component {\n    constructor() {\n        super()\n        this.state = {\n            list: [],\n            page: 1,\n            has_next: false,\n            isDataArrive: true\n        }\n    }\n    componentDidMount() {\n        const page = this.state.page\n        const page_size = 10\n        const page_num = page\n        this.getArticleList(page_num, page_size)\n\n        window.addEventListener('scroll', this.loadMore);\n    }\n    componentWillUnmount() {\n        window.removeEventListener('scroll', this.loadMore)\n    }\n\n    loadMore=()=> {\n        let scrollTop = document.documentElement.scrollTop || document.body.scrollTop;\n        let clientHeight = document.documentElement.clientHeight || document.body.clientHeight;\n        let scrollHeight = document.documentElement.scrollHeight || document.body.scrollHeight;\n        if (scrollTop + clientHeight === scrollHeight) {\n            this.getMoreArticleList()\n        }\n    }\n\n    getArticleList(page_num, page_size) {\n        const username = this.props.match.params.username\n        if (username) {\n            const data = {\n                page_num,\n                page_size\n            }\n            topicList(data, username).then(res => {\n                if (res.code === 200) {\n                    const { has_next, next_number } = res.data.pageInfo\n                    this.setState({ list: res.data.topics, has_next, page: next_number })\n                } else {\n                    message.error(res.error)\n                }\n            })\n        }\n\n    }\n\n    //加载更多\n    getMoreArticleList() {\n        const { isDataArrive, has_next, page } = this.state\n        if (!isDataArrive || !has_next || page === 1) {\n            return\n        }\n        this.setState({ isDataArrive: false })\n        const data = {\n            page_num: page,\n            page_size: 10\n        }\n        const username = this.props.match.params.username\n        topicList(data, username).then(res => {\n            if (res.code === 200) {\n                const { has_next, next_number } = res.data.pageInfo\n                this.setState({\n                    list: [...this.state.list, ...res.data.topics],\n                    has_next, page: next_number, isDataArrive: true\n                })\n            } else {\n                message.error(res.error)\n            }\n        })\n\n    }\n\n    render() {\n        const { list } = this.state\n        return (\n            <div>\n                <Header {...this.props} />\n                <img src={require('../../assets/imgs/page_bg1.png')} className=\"figure-img img-fluid w-100\" alt=\"\" />\n                <div className=\"container\">\n                    <div className=\"public-header\" style={{ marginBottom: 20 }}>\n                        <span className=\"header-name\">文章列表</span>\n                        <span>不要轻易放弃。学习成长的路上，我们长路漫漫，只因学无止境。 </span>\n                    </div>\n                    <div className=\"row\">\n                        <div className=\"col-md-8\">\n                            {list.map((item, index) => {\n                                return (\n                                    <Topic data={item} key={index} {...this.props} />\n                                )\n                            })}\n\n                            {list.length === 0 ?\n                                <div className=\"no-data\">暂无数据</div> : null\n                            }\n\n                        </div>\n                        <div className=\"col-md-4\">\n                            <Aside {...this.props}/>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","module.exports = __webpack_public_path__ + \"static/media/page_bg1.ece80134.png\";"],"sourceRoot":""}