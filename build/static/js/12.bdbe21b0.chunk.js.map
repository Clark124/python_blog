{"version":3,"sources":["pages/Index/components/carousel.js","pages/Index/index.js"],"names":["carousel","data","this","props","autoplay","map","item","index","images","img","entity","div","document","createElement","innerHTML","innerText","textContent","entityToString","className","key","id","onClick","history","push","username","title","src","default_img_2","alt","Component","Index","state","list","carouselList","page","has_next","isDataArrive","page_num","getArticleList","getTopicCarousel","window","addEventListener","loadMore","bind","removeEventListener","documentElement","scrollTop","body","clientHeight","scrollHeight","console","log","getMoreArticleList","page_size","homeTopicList","then","res","code","pageInfo","next_number","setState","topics","message","error","topicCarousel","Header","style","marginTop","Aside"],"mappings":"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","file":"static/js/12.bdbe21b0.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport { Carousel } from 'antd';\n// import default_img from '../../../assets/imgs/banner01.jpg'\nimport default_img_2 from '../../../assets/imgs/banner02.jpg'\n\nfunction entityToString(entity) {\n    var div = document.createElement('div');\n    div.innerHTML = entity;\n    var res = div.innerText || div.textContent;\n    return res;\n}\n\nexport default class carousel extends Component {\n\n    render() {\n        const data = this.props.data\n        return (\n            <Carousel  autoplay>\n                {data.map((item, index) => {\n                    const images = item.images.map(img => {\n                        return entityToString(img)\n                    })\n                    return (\n                        <div className=\"carousel-item\" key={item.id}\n                            onClick={() => this.props.history.push(`/articleDetail/${item.username}/${item.id}`)}\n                        >\n                            <div className=\"carousel-title\">{item.title}</div>\n                            <img src={images[0] ? images[0] : default_img_2} alt=\"\" className=\"figure-img img-fluid w-100\" />\n\n                        </div>\n                    )\n                })}\n            </Carousel>\n        )\n    }\n\n}","import React, { Component } from 'react'\nimport Header from '../../components/Header'\nimport './index.css'\nimport Carousel from './components/carousel'\nimport Topic from '../../components/TopicItem/topicItem'\n// import { Link } from 'react-router-dom'\nimport Aside from '../../components/Aside'\nimport { homeTopicList ,topicCarousel} from '../../servers/index'\nimport { message } from 'antd'\n\nconst PAGE_SIZE = 10\n\n\nexport default class Index extends Component {\n    constructor() {\n        super()\n        this.state = {\n            list: [],\n            carouselList:[],\n            page: 1,\n            has_next: false,\n            isDataArrive: true\n        }\n    }\n\n    componentDidMount() {\n        const page = this.state.page\n        const page_size = PAGE_SIZE\n        const page_num = page\n        this.getArticleList(page_num, page_size)\n        this.getTopicCarousel()\n        window.addEventListener('scroll', this.loadMore.bind(this));\n    }\n\n    componentWillUnmount(){\n        window.removeEventListener('scroll',this.loadMore.bind(this))\n    }\n\n    loadMore(){\n        let scrollTop = document.documentElement.scrollTop || document.body.scrollTop;\n        let clientHeight = document.documentElement.clientHeight || document.body.clientHeight;\n        let scrollHeight = document.documentElement.scrollHeight || document.body.scrollHeight;\n        if (scrollTop + clientHeight === scrollHeight) {\n            console.log(\"到底部了\")\n            this.getMoreArticleList()\n        }\n    }\n\n    getArticleList(page_num, page_size) {\n        const data = {\n            page_num,\n            page_size\n        }\n        homeTopicList(data).then(res => {\n            if (res.code === 200) {\n                const { has_next, next_number } = res.data.pageInfo\n                this.setState({ list: res.data.topics, has_next, page: next_number })\n            } else {\n                message.error(res.error)\n            }\n        })\n    }\n\n    //加载更多\n    getMoreArticleList() {\n        const { isDataArrive, has_next, page } = this.state\n        if (!isDataArrive || !has_next || page === 1) {\n            return\n        }\n        this.setState({ isDataArrive: false })\n        const data = {\n            page_num: page,\n            page_size: PAGE_SIZE\n        }\n     \n        homeTopicList(data).then(res => {\n            if (res.code === 200) {\n                const { has_next, next_number } = res.data.pageInfo\n                this.setState({\n                    list: [...this.state.list, ...res.data.topics],\n                    has_next, page: next_number, isDataArrive: true\n                })\n            } else {\n                message.error(res.error)\n            }\n        })\n\n    }\n\n    getTopicCarousel(){\n        topicCarousel().then(res=>{\n            if(res.code===200){\n                this.setState({carouselList:res.data.topics})\n            }\n        })\n    }\n\n\n\n    render() {\n        const { list ,carouselList} = this.state\n        return (\n            <div>\n                <Header {...this.props} />\n                <div className=\"container\" style={{ marginTop: '30px' }}>\n                    <div className=\"row\">\n                        <div className=\"col-md-8\">\n                            <Carousel data={carouselList} {...this.props}/>\n                            <div style={{ marginTop: '30px' }}>\n                                {list.map((item, index) => {\n                                    return (\n                                        <Topic data={item} key={index} {...this.props} />\n                                    )\n                                })}\n\n                            </div>\n\n                        </div>\n\n                        <div className=\"col-md-4\">\n                            <Aside {...this.props}/>\n                        </div>\n                    </div>\n                </div>\n\n\n\n            </div>\n        )\n    }\n}"],"sourceRoot":""}