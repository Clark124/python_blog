{"version":3,"sources":["pages/Search/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","assets/imgs/page_bg1.png"],"names":["Search","state","list","page","has_next","isDataArrive","page_num","this","getSearchTopic","window","addEventListener","loadMore","bind","removeEventListener","document","documentElement","scrollTop","body","clientHeight","scrollHeight","console","log","getMoreSearchTopict","page_size","data","key","props","location","search","split","searchTopic","then","res","code","pageInfo","next_number","setState","topics","message","error","src","require","className","alt","map","item","index","length","Component","_arrayLikeToArray","arr","len","i","arr2","Array","_toConsumableArray","isArray","iter","Symbol","iterator","Object","from","o","minLen","n","prototype","toString","call","slice","constructor","name","test","TypeError","module","exports"],"mappings":"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","file":"static/js/14.5f8da818.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport Header from '../../components/Header'\nimport Topic from '../../components/TopicItem/topicItem'\nimport Aside from '../../components/Aside/index'\nimport {searchTopic} from '../../servers/index'\nimport {message} from 'antd'\n\nexport default class Search extends Component {\n    constructor(){\n        super()\n        this.state = {\n            list: [],\n            page: 1,\n            has_next: false,\n            isDataArrive: true \n        }\n    }\n    componentDidMount(){\n        const page = this.state.page\n        const page_size = 10\n        const page_num = page\n        this.getSearchTopic(page_num,page_size)\n        window.addEventListener('scroll', this.loadMore.bind(this));\n    }\n    componentWillUnmount() {\n        window.removeEventListener('scroll', this.loadMore.bind(this))\n    }\n    loadMore() {\n        let scrollTop = document.documentElement.scrollTop || document.body.scrollTop;\n        let clientHeight = document.documentElement.clientHeight || document.body.clientHeight;\n        let scrollHeight = document.documentElement.scrollHeight || document.body.scrollHeight;\n        if (scrollTop + clientHeight === scrollHeight) {\n            console.log(\"到底部了\")\n            this.getMoreSearchTopict()\n        }\n    }\n\n    getSearchTopic(page_num, page_size){\n        const key = this.props.location.search.split('=')[1]\n        const data = {\n            key,page_num,page_size\n        }\n        searchTopic(data).then(res=>{\n            if(res.code===200){\n                const { has_next, next_number } = res.data.pageInfo\n                this.setState({ list: res.data.topics, has_next, page: next_number })\n            }\n        })\n    }\n\n    getMoreSearchTopict() {\n        const { isDataArrive, has_next, page } = this.state\n        if (!isDataArrive || !has_next || page === 1) {\n            return\n        }\n        this.setState({ isDataArrive: false })\n        const key = this.props.location.search.split('=')[1]\n        const data = {\n            key,\n            page_num: page,\n            page_size: 10,\n            \n        }\n        \n        searchTopic(data).then(res => {\n            if (res.code === 200) {\n                const { has_next, next_number } = res.data.pageInfo\n                this.setState({\n                    list: [...this.state.list, ...res.data.topics],\n                    has_next, page: next_number, isDataArrive: true\n                })\n            } else {\n                message.error(res.error)\n            }\n        })\n\n    }\n\n\n    render() {\n        const {list} = this.state\n        return (\n            <div>\n                <Header {...this.props} />\n                <img src={require('../../assets/imgs/page_bg1.png')} className=\"figure-img img-fluid w-100\" alt=\"\" />\n                <div className=\"container\">\n                    <div className=\"row\">\n                        <div className=\"col-md-8\">\n                            {list.map((item, index) => {\n                                return (\n                                    <Topic data={item} key={index} {...this.props} />\n                                )\n                            })}\n\n                            {list.length === 0 ?\n                                <div className=\"no-data\">未找到相关内容</div> : null\n                            }\n\n                        </div>\n                        <div className=\"col-md-4\">\n                            <Aside />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","module.exports = __webpack_public_path__ + \"static/media/page_bg1.ece80134.png\";"],"sourceRoot":""}