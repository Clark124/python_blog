(this.webpackJsonpblog_front_new=this.webpackJsonpblog_front_new||[]).push([[14],{222:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return f}));var a=n(62),r=n(8),o=n(9),i=n(11),c=n(10),s=n(0),l=n.n(s),u=n(44),m=n(72),d=n(52),p=n(34),h=n(226),f=function(e){Object(i.a)(s,e);var t=Object(c.a)(s);function s(){var e;return Object(r.a)(this,s),(e=t.call(this)).state={list:[],page:1,has_next:!1,isDataArrive:!0},e}return Object(o.a)(s,[{key:"componentDidMount",value:function(){var e=this.state.page;this.getSearchTopic(e,10),window.addEventListener("scroll",this.loadMore.bind(this))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.loadMore.bind(this))}},{key:"loadMore",value:function(){(document.documentElement.scrollTop||document.body.scrollTop)+(document.documentElement.clientHeight||document.body.clientHeight)===(document.documentElement.scrollHeight||document.body.scrollHeight)&&(console.log("\u5230\u5e95\u90e8\u4e86"),this.getMoreSearchTopict())}},{key:"getSearchTopic",value:function(e,t){var n=this,a={key:this.props.location.search.split("=")[1],page_num:e,page_size:t};Object(p.m)(a).then((function(e){if(200===e.code){var t=e.data.pageInfo,a=t.has_next,r=t.next_number;n.setState({list:e.data.topics,has_next:a,page:r})}}))}},{key:"getMoreSearchTopict",value:function(){var e=this,t=this.state,n=t.isDataArrive,r=t.has_next,o=t.page;if(n&&r&&1!==o){this.setState({isDataArrive:!1});var i={key:this.props.location.search.split("=")[1],page_num:o,page_size:10};Object(p.m)(i).then((function(t){if(200===t.code){var n=t.data.pageInfo,r=n.has_next,o=n.next_number;e.setState({list:[].concat(Object(a.a)(e.state.list),Object(a.a)(t.data.topics)),has_next:r,page:o,isDataArrive:!0})}else h.b.error(t.error)}))}}},{key:"render",value:function(){var e=this,t=this.state.list;return l.a.createElement("div",null,l.a.createElement(u.a,this.props),l.a.createElement("img",{src:n(73),className:"figure-img img-fluid w-100",alt:""}),l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-8"},t.map((function(t,n){return l.a.createElement(m.a,Object.assign({data:t,key:n},e.props))})),0===t.length?l.a.createElement("div",{className:"no-data"},"\u672a\u627e\u5230\u76f8\u5173\u5185\u5bb9"):null),l.a.createElement("div",{className:"col-md-4"},l.a.createElement(d.a,null)))))}}]),s}(s.Component)},62:function(e,t,n){"use strict";function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function r(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(t,"a",(function(){return r}))},73:function(e,t,n){e.exports=n.p+"static/media/page_bg1.ece80134.png"}}]);
//# sourceMappingURL=14.5f8da818.chunk.js.map